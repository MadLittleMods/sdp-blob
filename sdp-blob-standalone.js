/**
 * SDP-Blob - Turn a WebRTC Offer/Answer into a compact blob/token
 * @version v1.0.0
 * @link https://github.com/MadLittleMods/SDP-Blob
 */
!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.SDPBlob=e()}}(function(){var e;return function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var p=r[a]={exports:{}};e[a][0].call(p.exports,function(t){var r=e[a][1][t];return o(r?r:t)},p,p.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t){var r=e("./lib/sdp-blob");t.exports=r},{"./lib/sdp-blob":5}],2:[function(t,r,n){!function(o,i){"function"==typeof e&&e.amd?e(["big-integer"],i):"object"==typeof n?r.exports=i(t("big-integer")):o.baseConversion=i(o.bigInt)}(this,function(e){"use strict";function t(t,r,n,i,a){if(i=i?i:o,a=a?a:i,r>i.length||n>a.length)return console.warn("Can't convert",t,"to base",n,"greater than symbol table length. src-table:",i.length,"dest-table:",a.length),!1;for(var s=e(0),u=0;u<t.length;u++)s=s.multiply(r).add(i.indexOf(t.charAt(u)));if(s.lesser(0))return 0;for(var p=s.mod(n),f=a.charAt(p),c=s.divide(n);!c.equals(0);)p=c.mod(n),c=c.divide(n),f=a.charAt(p)+f;return f}var r=[{start:48,end:57},{start:65,end:90},{start:97,end:122},33,{start:35,end:38},{start:40,end:47},{start:58,end:64},91,{start:93,end:96},{start:123,end:126},{start:161,end:172},{start:174,end:255}],n=[];r.forEach(function(e){if("object"==typeof e)for(var t=e.start;t<e.start+(e.end-e.start+1);t++)n.push(t);else n.push(e)});var o=String.fromCharCode.apply(String,n);return{baseSymbols:o,baseConvert:t}})},{"big-integer":7}],3:[function(t,r,n){!function(o,i){if("function"==typeof e&&e.amd)e(["extend"],i);else if("object"==typeof n)r.exports=i(t("extend"));else{var a=o.$?o.$.extend:o.extend;o.convertKeys=i(a)}}(this,function(e){"use strict";function t(s,u,p){if("object"!=typeof s||null==u)return s;var f=e(!0,{},s);return Object.keys(f).forEach(function(e){var s=p?n(u,e):e,c=p?s:u[s];if("object"==typeof c&&(c=c[o]),!c)return f;r(f,e,c);var l=f[c];if(l instanceof Array)for(var d=0,h=l.length;h>d;d++)f[c][d]=t(l[d],u[s][a],p);else"object"==typeof l&&(f[c]=t(l,u[s][i],p))}),f}function r(e,t,r){return e.hasOwnProperty(t)&&(e[r]=e[t],delete e[t]),e}function n(e,t){for(var r=Object.keys(e),n=!1,i=0;i<r.length;i++){var a=r[i],s=e[a];if("object"==typeof s&&(s=s[o]),s==t){n=a;break}}return n}var o="_short",i="_object",a="_array_item";return t})},{extend:8}],4:[function(t,r,n){!function(o,i){"function"==typeof e&&e.amd?e(["lz-string"],i):"object"==typeof n?r.exports=i(t("lz-string")):o.DataBlob=i(o.LZString)}(this,function(e){"use strict";var t={assembleBlob:function(t,r){var n="utf16"==r?e.compressToUTF16:e.compressToBase64,o=JSON.stringify(t),i=n(o);return i},parseBlob:function(t,r){var n="utf16"==r?e.decompressFromUTF16:e.decompressFromBase64,o=n(t),i=JSON.parse(o);return i}};return t})},{"lz-string":9}],5:[function(t,r,n){!function(o,i){"function"==typeof e&&e.amd?e(["data-blob","session-description-utility"],i):"object"==typeof n?r.exports=i(t("./data-blob"),t("./session-description-utility")):o.SDPBlob=i(o.DataBlob,o.SDPUtility)}(this,function(e,t){"use strict";var r=window.mozRTCSessionDescription||window.RTCSessionDescription,n={debug:!1,assembleBlob:function(r){t.debug=this.debug,e.debug=this.debug;var n=r,o="base64";"object"==typeof r&&(n=r.description||r,o=r.encoding||"base64");var i=t.generateBlobContentsFromDescription(n,!0),a=e.assembleBlob(i,o);return this.debug&&(console.groupCollapsed("Lengths:",JSON.stringify(n).length,JSON.stringify(i).length,a.length),console.log("Description length:",JSON.stringify(n).length),console.log("DataBlob of description length :",e.assembleBlob(n).length),console.log("SDPBlob length:",a.length),console.groupEnd()),a},parseBlob:function(n,o){t.debug=this.debug,e.debug=this.debug;var i=n,a="base64";"object"==typeof n&&(i=n.blob,o=n.type||o||"offer",a=n.encoding||"base64");var s=e.parseBlob(i,a),u=t.restoreSessionDescription(s,o);return new r(u)}};return n})},{"./data-blob":4,"./session-description-utility":6}],6:[function(t,r,n){!function(o,i){if("function"==typeof e&&e.amd)e(["extend","sdp-transform","convert-keys","base-number-convert"],i);else if("object"==typeof n)r.exports=i(t("extend"),t("sdp-transform"),t("./convert-keys"),t("./base-number-convert"));else{var a=o.$?o.extend:o.extend;o.SDPUtility=i(a,o.transform,o.convertKeys,o.baseConversion)}}(this,function(e,t,r,n){"use strict";var o=window.mozRTCSessionDescription||window.RTCSessionDescription,i={payloads:"l",ip:"i",port:"p",icePwd:"w",iceUfrag:"u",fingerprint:"f",candidates:{_short:"c",_array_item:{component:"c",foundation:"f",generation:"g",ip:"i",port:"p",priority:"r",transport:"t",type:"y"}}},a={debug:!1,generateBlobContentsFromDescription:function(o,a){var s={payloads:-1,ip:"",port:-1,icePwd:"",iceUfrag:"",fingerprint:"",candidates:[]},u=t.parse(o.sdp);this.debug&&console.log("Generating blob contents from parsed sdp:",u);for(var p,f={},c=0;c<u.media.length;c++)if("application"==u.media[c].type){p=u.media[c];break}if(p){f.payloads=p.payloads,f.ip=p.connection?p.connection.ip:null,f.port=p.port,f.icePwd=p.icePwd||u.icePwd,f.iceUfrag=p.iceUfrag||u.iceUfrag;var l=(p.fingerprint?p.fingerprint.hash:null)||u.fingerprint.hash;l=l.replace(/:/g,""),l=n.baseConvert(l,16,64),f.fingerprint=l,f.candidates=function(){var e=[];return p.candidates.sort(function(e,t){return e.priority>t.priority?-1:1}),p.candidates.forEach(function(t,r){delete t.foundation,t.priority=r+1,e.push(t)}),e}()}var d=e({},s,f),h=e(!0,{},d);return a&&r(h,i,!1),h},restoreSessionDescription:function(a,s){var u=function(t){var r={version:0,origin:{address:"127.0.0.1",ipVer:4,netType:"IN",sessionId:Math.round(5e3*Math.random())+500,sessionVersion:0,username:"-"},name:"-",timing:{start:0,stop:0},groups:[{mids:"data",type:"BUNDLE"}],icePwd:t.icePwd,iceUfrag:t.iceUfrag,fingerprint:{hash:function(){var e=n.baseConvert(t.fingerprint,64,16),r=e.replace(/([0-9A-F]{2})(?=.)/g,"$1:");return r}(),type:"sha-256"},media:[{type:"application",payloads:t.payloads,protocol:"DTLS/SCTP",port:t.port,connection:{ip:t.ip,version:4},invalid:[{value:"sctpmap:5000 webrtc-datachannel 1024"}],setup:"offer"==s?"actpass":"active",mid:"data",candidates:function(){var e=[];return t.candidates.forEach(function(t){t.foundation=Math.round(5e4*Math.random())+5e4,e.push(t)}),e}()}]},o=window.navigator.appVersion.match(/(Chrom[e|ium])\/(\d*)/),i=!1,a=-1;if(o&&(i=o[1].length>0,a=parseInt(o[2],10)),i&&38==a){var u=e(!0,{},r.media[0]);u.type="audio",u.mid="audio",r.media.unshift(u)}return r};null==s&&console.warn("No type provided when restoring SDP from blob. This will most likely cause a failure to open a datachannel"),this.debug&&console.log("Restoring sdp from context",a);var p=e(!0,{},a);r(p,i,!0);var f=u(p);this.debug&&console.log("Restored compiled sdp context",f);var c={sdp:t.write(f),type:s};return new o(c)}};return a})},{"./base-number-convert":2,"./convert-keys":3,extend:8,"sdp-transform":11}],7:[function(e,t){"use strict";var r=function(){function e(e,t){this.value=e,this.sign=t}function t(e){for(var t=e.length-1;0===e[t]&&t>0;)t--;return e.slice(0,t+1)}function n(t,r){var n=0>r;if(t.sign!==n)return n?o(t.abs(),-r):o(t.abs(),r).negate();n&&(r=-r);for(var i=t.value,a=[],s=0,u=0;u<i.length||s>0;u++){var p=(i[u]||0)+(u>0?0:r)+s;s=p>=m?1:0,a.push(p%m)}return new e(a,t.sign)}function o(t,r){if(t.sign!==0>r)return n(t,-r);var o=!1;t.sign&&(o=!0);var i=t.value;if(1===i.length&&i[0]<r)return new e([r-i[0]],!o);o&&(r=-r);for(var a=[],s=0,u=0;u<i.length;u++){var p=i[u]-s-(u>0?0:r);s=0>p?1:0,a.push(s*m+p)}return new e(a,o)}function i(t,r){var n=t.value,o=0>r,i=[],a=0;o&&(r=-r);for(var s=0;s<n.length||a>0;s++){var u=(n[s]||0)*r+a;a=u/m|0,i.push(u%m)}return new e(i,o?!t.sign:t.sign)}function a(r,n){if(0===n)throw new Error("Cannot divide by zero.");var o=r.value,i=0>n,a=[],s=0;i&&(n=-n);for(var u=o.length-1;u>=0;u--){var p=s*m+o[u];s=p%n,a.push(p/n|0)}return{quotient:new e(t(a.reverse()),i?!r.sign:r.sign),remainder:new e([s],r.sign)}}function s(t){return("number"==typeof t||"string"==typeof t)&&m>=+t||t instanceof e&&t.value.length<=1}function u(e,t){return e=h(e).abs(),t=h(t).abs(),e.equals(t)?e:e.equals(q)?t:t.equals(q)?e:e.isEven()?t.isOdd()?u(e.divide(2),t):u(e.divide(2),t.divide(2)).multiply(2):t.isEven()?u(e,t.divide(2)):e.greater(t)?u(e.subtract(t).divide(2),t):u(t.subtract(e).divide(2),e)}function p(e,t){return e=h(e).abs(),t=h(t).abs(),e.multiply(t).divide(u(e,t))}function f(e,t){return e=h(e),t=h(t),e.greater(t)?e:t}function c(e,t){return e=h(e),t=h(t),e.lesser(t)?e:t}function l(t,r){t=h(t),r=h(r);for(var n=c(t,r),o=f(t,r),i=o.subtract(n),a=i.value.length-1,s=[],u=!0,p=a;p>=0;p--){var l=u?i.value[p]:m,d=Math.floor(Math.random()*l);s.unshift(d),l>d&&(u=!1)}return n.add(new e(s,!1))}function d(e,t,r){for(var n=q,o=f(e.abs(),t.abs()),a=k;a.lesserOrEquals(o);){var s,u;s=e.over(a).isEven()?0:1,u=t.over(a).isEven()?0:1,n=n.add(a.times(r(s,u))),a=i(a,2)}return n}function h(t){if(t instanceof e)return t;if(Math.abs(+t)<m&&+t===(0|+t)){var r=+t;return new e([Math.abs(r)],0>r||1/r===-1/0)}t+="";var n=b.positive,r=[];"-"===t[0]&&(n=b.negative,t=t.slice(1));var t=t.split(/e/i);if(t.length>2)throw new Error("Invalid integer: "+t.join("e"));if(t[1]){var o=t[1];if("+"===o[0]&&(o=o.slice(1)),o=h(o),o.lesser(0))throw new Error("Cannot include negative exponent part for integers");for(;o.notEquals(0);)t[0]+="0",o=o.prev()}t=t[0],"-0"===t&&(t="0");var i=/^([0-9][0-9]*)$/.test(t);if(!i)throw new Error("Invalid integer: "+t);for(;t.length;){var a=t.length>y?t.length-y:0;r.push(+t.slice(a)),t=t.slice(0,a)}return new e(r,n)}function g(e){var t=e.value;return 1===t.length&&t[0]<=36?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t[0]):"<"+t+">"}function v(e,t){if(t=r(t),t.equals(0)){if(e.equals(0))return"0";throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1))return e.equals(0)?"0":e.lesser(0)?Array(1-e).join("10"):"1"+Array(+e).join("01");var n="";if(e.isNegative()&&t.isPositive()&&(n="-",e=e.abs()),t.equals(1))return e.equals(0)?"0":n+Array(+e+1).join(1);for(var o,i=[],a=e;a.lesser(0)||a.compareAbs(t)>=0;){o=a.divmod(t),a=o.quotient;var s=o.remainder;s.lesser(0)&&(s=t.minus(s).abs(),a=a.next()),i.push(g(s))}return i.push(g(a)),n+i.reverse().join("")}var m=1e7,y=7,b={positive:!1,negative:!0};e.prototype.negate=function(){return new e(this.value,!this.sign)},e.prototype.abs=function(){return new e(this.value,b.positive)},e.prototype.add=function(r){if(s(r))return n(this,+r);if(r=h(r),this.sign!==r.sign)return this.sign===b.positive?this.abs().subtract(r.abs()):r.abs().subtract(this.abs());for(var o=this.value,i=r.value,a=[],u=0,p=Math.max(o.length,i.length),f=0;p>f||u>0;f++){var c=(o[f]||0)+(i[f]||0)+u;u=c>=m?1:0,a.push(c%m)}return new e(t(a),this.sign)},e.prototype.plus=function(e){return this.add(e)},e.prototype.subtract=function(r){if(s(r))return o(this,+r);if(r=h(r),this.sign!==r.sign)return this.add(r.negate());if(this.sign===b.negative)return r.negate().subtract(this.negate());if(this.compare(r)<0)return r.subtract(this).negate();for(var n=this.value,i=r.value,a=[],u=0,p=Math.max(n.length,i.length),f=0;p>f;f++){var c=n[f]||0,l=i[f]||0,d=c-u;u=l>d?1:0,a.push(u*m+d-l)}return new e(t(a),b.positive)},e.prototype.minus=function(e){return this.subtract(e)},e.prototype.multiply=function(r){if(s(r))return i(this,+r);r=h(r);for(var n=this.sign!==r.sign,o=this.value,a=r.value,u=Math.max(o.length,a.length),p=[],f=0;u>f;f++){p[f]=[];for(var c=f;c--;)p[f].push(0)}for(var l=0,f=0;f<o.length;f++)for(var d=o[f],c=0;c<a.length||l>0;c++){var g=a[c],v=g?d*g+l:l;l=Math.floor(v/m),p[f].push(v%m)}for(var y=-1,f=0;f<p.length;f++){var b=p[f].length;b>y&&(y=b)}for(var w=[],l=0,f=0;y>f||l>0;f++){for(var S=l,c=0;c<p.length;c++)S+=p[c][f]||0;l=S>m?Math.floor(S/m):0,S-=l*m,w.push(S)}return new e(t(w),n)},e.prototype.times=function(e){return this.multiply(e)},e.prototype.divmod=function(r){if(s(r))return a(this,+r);r=h(r);var n=this.sign!==r.sign;if(this.equals(0))return{quotient:new e([0],b.positive),remainder:new e([0],b.positive)};if(r.equals(0))throw new Error("Cannot divide by zero");for(var o=this.value,i=r.value,u=[],p=[],f=o.length-1;f>=0;f--){var c=[o[f]].concat(p),l=C(i,c);u.push(l.result),p=l.remainder}return u.reverse(),{quotient:new e(t(u),n),remainder:new e(t(p),this.sign)}},e.prototype.divide=function(e){return this.divmod(e).quotient},e.prototype.over=function(e){return this.divide(e)},e.prototype.mod=function(e){return this.divmod(e).remainder},e.prototype.remainder=function(e){return this.mod(e)},e.prototype.pow=function(e){e=h(e);var t=this,r=e,n=k;if(r.equals(q))return n;if(t.equals(q)||r.lesser(q))return q;for(;;){if(r.isOdd()&&(n=n.times(t)),r=r.divide(2),r.equals(q))break;t=t.times(t)}return n},e.prototype.modPow=function(e,t){if(e=h(e),t=h(t),t.equals(q))throw new Error("Cannot take modPow with modulus 0");var r=k,n=this.mod(t);if(n.equals(q))return q;for(;e.greater(0);)e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t);return r},e.prototype.square=function(){return this.multiply(this)},e.prototype.next=function(){return n(this,1)},e.prototype.prev=function(){return o(this,1)},e.prototype.compare=function(e){var t=this,r=h(e);if(1===t.value.length&&1===r.value.length&&0===t.value[0]&&0===r.value[0])return 0;if(r.sign!==t.sign)return t.sign===b.positive?1:-1;for(var n=t.sign===b.positive?1:-1,o=t.value,i=r.value,a=Math.max(o.length,i.length)-1,s=a;s>=0;s--){var u=o[s]||0,p=i[s]||0;if(u>p)return 1*n;if(p>u)return-1*n}return 0},e.prototype.compareTo=function(e){return this.compare(e)},e.prototype.compareAbs=function(e){return this.abs().compare(e.abs())},e.prototype.equals=function(e){return 0===this.compare(e)},e.prototype.notEquals=function(e){return!this.equals(e)},e.prototype.lesser=function(e){return this.compare(e)<0},e.prototype.greater=function(e){return this.compare(e)>0},e.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},e.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},e.prototype.lt=e.prototype.lesser,e.prototype.leq=e.prototype.lesserOrEquals,e.prototype.gt=e.prototype.greater,e.prototype.geq=e.prototype.greaterOrEquals,e.prototype.eq=e.prototype.equals,e.prototype.neq=e.prototype.notEquals,e.prototype.isPositive=function(){return this.sign===b.positive},e.prototype.isNegative=function(){return this.sign===b.negative},e.prototype.isEven=function(){return this.value[0]%2===0},e.prototype.isOdd=function(){return this.value[0]%2===1},e.prototype.isUnit=function(){return 1===this.value.length&&1===this.value[0]},e.prototype.isDivisibleBy=function(e){return this.mod(e).equals(q)},e.prototype.isPrime=function(){var e=this.abs(),t=e.prev();if(e.isUnit())return!1;if(e.equals(2)||e.equals(3)||e.equals(5))return!0;if(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))return!1;if(e.lesser(25))return!0;for(var n,o,i,a,s=[2,3,5,7,11,13,17,19],u=t;u.isEven();)u=u.divide(2);for(i=0;i<s.length;i++)if(a=r(s[i]).modPow(u,e),!a.equals(k)&&!a.equals(t)){for(o=!0,n=u;o&&n.lesser(t);n=n.multiply(2))a=a.square().mod(e),a.equals(t)&&(o=!1);if(o)return!1}return!0};for(var w=[1];w[w.length-1]<=m;)w.push(2*w[w.length-1]);var S=w.length,x=w[S-1];e.prototype.shiftLeft=function(e){if(!s(e))return e.isNegative()?this.shiftRight(e.abs()):this.times(r(2).pow(e));if(e=+e,0>e)return this.shiftRight(-e);for(var t=this;e>=S;)t=i(t,x),e-=S-1;return i(t,w[e])},e.prototype.shiftRight=function(e){if(!s(e))return e.isNegative()?this.shiftLeft(e.abs()):this.over(r(2).pow(e));if(e=+e,0>e)return this.shiftLeft(-e);for(var t=this;e>=S;){if(t.equals(q))return t;t=a(t,x).quotient,e-=S-1}return a(t,w[e]).quotient},e.prototype.not=function(){var e=d(this,this,function(e){return(e+1)%2});return this.sign?e:e.negate()},e.prototype.and=function(e){e=h(e);var t=d(this,e,function(e,t){return e*t});return this.sign&&e.sign?t.negate():t},e.prototype.or=function(e){e=h(e);var t=d(this,e,function(e,t){return(e+t+e*t)%2});return this.sign||e.sign?t.negate():t},e.prototype.xor=function(e){e=h(e);var t=d(this,e,function(e,t){return(e+t)%2});return this.sign^e.sign?t.negate():t},e.prototype.toString=function(e){if(void 0===e&&(e=10),10!==e)return v(this,e);var t=this,r="",n=t.value.length;if(0===n)return"0";for(;n--;)r+=8===t.value[n].toString().length?t.value[n]:(m.toString()+t.value[n]).slice(-y);for(;"0"===r[0];)r=r.slice(1);if(r.length||(r="0"),"0"===r)return r;var o=t.sign===b.positive?"":"-";return o+r},e.prototype.toJSNumber=function(){return this.valueOf()},e.prototype.valueOf=function(){return 1===this.value.length?this.sign?-this.value[0]:this.value[0]:+this.toString()};var C=function(t,r){var t=new e(t,b.positive),r=new e(r,b.positive);if(t.equals(0))throw new Error("Cannot divide by 0");var n=0;do{for(var o=1,i=t,a=i.times(10);a.lesser(r);)i=a,o*=10,a=a.times(10);for(;i.lesserOrEquals(r);)r=r.minus(i),n+=o}while(t.lesserOrEquals(r));return{remainder:r.value,result:n}},q=new e([0],b.positive),k=new e([1],b.positive),A=new e([1],b.negative),E=function(e,t){function r(e){var t=e[n].toLowerCase();if(0===n&&"-"===e[n])return void(a=!0);if(/[0-9]/.test(t))i.push(h(t));else if(/[a-z]/.test(t))i.push(h(t.charCodeAt(0)-87));else{if("<"!==t)throw new Error(t+" is not a valid character");var r=n;do n++;while(">"!==e[n]);i.push(h(e.slice(r+1,n)))}}t=h(t);var n,o=q,i=[],a=!1;for(n=0;n<e.length;n++)r(e);for(i.reverse(),n=0;n<i.length;n++)o=o.add(i[n].times(t.pow(n)));return a?o.negate():o},O=function(e,t){return"undefined"==typeof e?q:"undefined"!=typeof t?E(e,t):h(e)};return O.zero=q,O.one=k,O.minusOne=A,O.randBetween=l,O.min=c,O.max=f,O.gcd=u,O.lcm=p,O}();"undefined"!=typeof t&&(t.exports=r)},{}],8:[function(e,t){var r,n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(e){"use strict";if(!e||"[object Object]"!==o.call(e))return!1;var t=n.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;var a;for(a in e);return a===r||n.call(e,a)};t.exports=function a(){"use strict";var e,t,n,o,s,u,p=arguments[0],f=1,c=arguments.length,l=!1;for("boolean"==typeof p?(l=p,p=arguments[1]||{},f=2):("object"!=typeof p&&"function"!=typeof p||null==p)&&(p={});c>f;++f)if(e=arguments[f],null!=e)for(t in e)n=p[t],o=e[t],p!==o&&(l&&o&&(i(o)||(s=Array.isArray(o)))?(s?(s=!1,u=n&&Array.isArray(n)?n:[]):u=n&&i(n)?n:{},p[t]=a(l,u,o)):o!==r&&(p[t]=o));return p}},{}],9:[function(e,t){var r={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var t,n,o,i,a,s,u,p="",f=0;for(e=r.compress(e);f<2*e.length;)f%2==0?(t=e.charCodeAt(f/2)>>8,n=255&e.charCodeAt(f/2),o=f/2+1<e.length?e.charCodeAt(f/2+1)>>8:0/0):(t=255&e.charCodeAt((f-1)/2),(f+1)/2<e.length?(n=e.charCodeAt((f+1)/2)>>8,o=255&e.charCodeAt((f+1)/2)):n=o=0/0),f+=3,i=t>>2,a=(3&t)<<4|n>>4,s=(15&n)<<2|o>>6,u=63&o,isNaN(n)?s=u=64:isNaN(o)&&(u=64),p=p+r._keyStr.charAt(i)+r._keyStr.charAt(a)+r._keyStr.charAt(s)+r._keyStr.charAt(u);return p},decompressFromBase64:function(e){if(null==e)return"";var t,n,o,i,a,s,u,p,f="",c=0,l=0,d=r._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)a=r._keyStr.indexOf(e.charAt(l++)),s=r._keyStr.indexOf(e.charAt(l++)),u=r._keyStr.indexOf(e.charAt(l++)),p=r._keyStr.indexOf(e.charAt(l++)),n=a<<2|s>>4,o=(15&s)<<4|u>>2,i=(3&u)<<6|p,c%2==0?(t=n<<8,64!=u&&(f+=d(t|o)),64!=p&&(t=i<<8)):(f+=d(t|n),64!=u&&(t=o<<8),64!=p&&(f+=d(t|i))),c+=3;return r.decompress(f)},compressToUTF16:function(e){if(null==e)return"";var t,n,o,i="",a=0,s=r._f;for(e=r.compress(e),t=0;t<e.length;t++)switch(n=e.charCodeAt(t),a++){case 0:i+=s((n>>1)+32),o=(1&n)<<14;break;case 1:i+=s(o+(n>>2)+32),o=(3&n)<<13;break;case 2:i+=s(o+(n>>3)+32),o=(7&n)<<12;break;case 3:i+=s(o+(n>>4)+32),o=(15&n)<<11;break;case 4:i+=s(o+(n>>5)+32),o=(31&n)<<10;break;case 5:i+=s(o+(n>>6)+32),o=(63&n)<<9;break;case 6:i+=s(o+(n>>7)+32),o=(127&n)<<8;break;case 7:i+=s(o+(n>>8)+32),o=(255&n)<<7;break;case 8:i+=s(o+(n>>9)+32),o=(511&n)<<6;break;case 9:i+=s(o+(n>>10)+32),o=(1023&n)<<5;break;case 10:i+=s(o+(n>>11)+32),o=(2047&n)<<4;break;case 11:i+=s(o+(n>>12)+32),o=(4095&n)<<3;break;case 12:i+=s(o+(n>>13)+32),o=(8191&n)<<2;break;case 13:i+=s(o+(n>>14)+32),o=(16383&n)<<1;break;case 14:i+=s(o+(n>>15)+32,(32767&n)+32),a=0}return i+s(o+32)},decompressFromUTF16:function(e){if(null==e)return"";for(var t,n,o="",i=0,a=0,s=r._f;a<e.length;){switch(n=e.charCodeAt(a)-32,i++){case 0:t=n<<1;break;case 1:o+=s(t|n>>14),t=(16383&n)<<2;break;case 2:o+=s(t|n>>13),t=(8191&n)<<3;break;case 3:o+=s(t|n>>12),t=(4095&n)<<4;break;case 4:o+=s(t|n>>11),t=(2047&n)<<5;break;case 5:o+=s(t|n>>10),t=(1023&n)<<6;break;case 6:o+=s(t|n>>9),t=(511&n)<<7;break;case 7:o+=s(t|n>>8),t=(255&n)<<8;break;case 8:o+=s(t|n>>7),t=(127&n)<<9;break;case 9:o+=s(t|n>>6),t=(63&n)<<10;break;case 10:o+=s(t|n>>5),t=(31&n)<<11;break;case 11:o+=s(t|n>>4),t=(15&n)<<12;break;case 12:o+=s(t|n>>3),t=(7&n)<<13;break;case 13:o+=s(t|n>>2),t=(3&n)<<14;break;case 14:o+=s(t|n>>1),t=(1&n)<<15;break;case 15:o+=s(t|n),i=0}a++}return r.decompress(o)},compress:function(e){if(null==e)return"";var t,n,o,i={},a={},s="",u="",p="",f=2,c=3,l=2,d="",h=0,g=0,v=r._f;for(o=0;o<e.length;o+=1)if(s=e.charAt(o),Object.prototype.hasOwnProperty.call(i,s)||(i[s]=c++,a[s]=!0),u=p+s,Object.prototype.hasOwnProperty.call(i,u))p=u;else{if(Object.prototype.hasOwnProperty.call(a,p)){if(p.charCodeAt(0)<256){for(t=0;l>t;t++)h<<=1,15==g?(g=0,d+=v(h),h=0):g++;for(n=p.charCodeAt(0),t=0;8>t;t++)h=h<<1|1&n,15==g?(g=0,d+=v(h),h=0):g++,n>>=1}else{for(n=1,t=0;l>t;t++)h=h<<1|n,15==g?(g=0,d+=v(h),h=0):g++,n=0;for(n=p.charCodeAt(0),t=0;16>t;t++)h=h<<1|1&n,15==g?(g=0,d+=v(h),h=0):g++,n>>=1}f--,0==f&&(f=Math.pow(2,l),l++),delete a[p]}else for(n=i[p],t=0;l>t;t++)h=h<<1|1&n,15==g?(g=0,d+=v(h),h=0):g++,n>>=1;f--,0==f&&(f=Math.pow(2,l),l++),i[u]=c++,p=String(s)}if(""!==p){if(Object.prototype.hasOwnProperty.call(a,p)){if(p.charCodeAt(0)<256){for(t=0;l>t;t++)h<<=1,15==g?(g=0,d+=v(h),h=0):g++;for(n=p.charCodeAt(0),t=0;8>t;t++)h=h<<1|1&n,15==g?(g=0,d+=v(h),h=0):g++,n>>=1}else{for(n=1,t=0;l>t;t++)h=h<<1|n,15==g?(g=0,d+=v(h),h=0):g++,n=0;for(n=p.charCodeAt(0),t=0;16>t;t++)h=h<<1|1&n,15==g?(g=0,d+=v(h),h=0):g++,n>>=1}f--,0==f&&(f=Math.pow(2,l),l++),delete a[p]}else for(n=i[p],t=0;l>t;t++)h=h<<1|1&n,15==g?(g=0,d+=v(h),h=0):g++,n>>=1;f--,0==f&&(f=Math.pow(2,l),l++)}for(n=2,t=0;l>t;t++)h=h<<1|1&n,15==g?(g=0,d+=v(h),h=0):g++,n>>=1;for(;;){if(h<<=1,15==g){d+=v(h);break}g++}return d},decompress:function(e){if(null==e)return"";if(""==e)return null;var t,n,o,i,a,s,u,p,f=[],c=4,l=4,d=3,h="",g="",v=r._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(n=0;3>n;n+=1)f[n]=n;for(i=0,s=Math.pow(2,2),u=1;u!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=32768,m.val=m.string.charCodeAt(m.index++)),i|=(a>0?1:0)*u,u<<=1;switch(t=i){case 0:for(i=0,s=Math.pow(2,8),u=1;u!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=32768,m.val=m.string.charCodeAt(m.index++)),i|=(a>0?1:0)*u,u<<=1;p=v(i);break;case 1:for(i=0,s=Math.pow(2,16),u=1;u!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=32768,m.val=m.string.charCodeAt(m.index++)),i|=(a>0?1:0)*u,u<<=1;p=v(i);break;case 2:return""}for(f[3]=p,o=g=p;;){if(m.index>m.string.length)return"";for(i=0,s=Math.pow(2,d),u=1;u!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=32768,m.val=m.string.charCodeAt(m.index++)),i|=(a>0?1:0)*u,u<<=1;switch(p=i){case 0:for(i=0,s=Math.pow(2,8),u=1;u!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=32768,m.val=m.string.charCodeAt(m.index++)),i|=(a>0?1:0)*u,u<<=1;f[l++]=v(i),p=l-1,c--;break;case 1:for(i=0,s=Math.pow(2,16),u=1;u!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=32768,m.val=m.string.charCodeAt(m.index++)),i|=(a>0?1:0)*u,u<<=1;f[l++]=v(i),p=l-1,c--;break;case 2:return g}if(0==c&&(c=Math.pow(2,d),d++),f[p])h=f[p];else{if(p!==l)return null;h=o+o.charAt(0)}g+=h,f[l++]=o+h.charAt(0),c--,o=h,0==c&&(c=Math.pow(2,d),d++)}}};"undefined"!=typeof t&&null!=t&&(t.exports=r)},{}],10:[function(e,t){var r=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)\/(\d*)(?:\s*\/(\S*))?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":"rtpmap:%d %s/%s"}},{push:"fmtp",reg:/^fmtp:(\d*) (\S*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:(\w*)/,format:"mid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{name:"msidSemantic",reg:/^msid-semantic: (\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{push:"invalid",names:["value"]}]};Object.keys(r).forEach(function(e){var t=r[e];t.forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],11:[function(e,t,r){var n=e("./parser"),o=e("./writer");r.write=o,r.parse=n.parse,r.parseFmtpConfig=n.parseFmtpConfig,r.parsePayloads=n.parsePayloads,r.parseRemoteCandidates=n.parseRemoteCandidates},{"./parser":12,"./writer":13}],12:[function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},o=function(e,t,r,o){if(o&&!r)t[o]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))},i=function(e,t,r){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:n?t[e.name]:t;o(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},a=e("./grammar"),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);r.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach(function(e){var t=e[0],o=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var u=a[t][s];if(u.reg.test(o))return i(u,n,o)}}),t.media=r,t};var u=function(e,t){var r=t.split("=");return 2===r.length&&(e[r[0]]=n(r[1])),e};r.parseFmtpConfig=function(e){return e.split(";").reduce(u,{})},r.parsePayloads=function(e){return e.split(" ").map(Number)},r.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),o=0;o<r.length;o+=3)t.push({component:r[o],ip:r[o+1],port:r[o+2]});return t}},{"./grammar":10}],13:[function(e,t){var r=e("./grammar"),n=/%[sdv%]/g,o=function(e){var t=1,r=arguments,o=r.length;return e.replace(n,function(e){if(t>=o)return e;var n=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}})},i=function(e,t,r){var n=t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format,i=[e+"="+n];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];i.push(t.name?r[t.name][s]:r[t.names[a]])}else i.push(r[t.name]);return o.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||a,o=t.innerOrder||s,u=[];return n.forEach(function(t){r[t].forEach(function(r){r.name in e?u.push(i(t,r,e)):r.push in e&&e[r.push].forEach(function(e){u.push(i(t,r,e))})})}),e.media.forEach(function(e){u.push(i("m",r.m[0],e)),o.forEach(function(t){r[t].forEach(function(r){r.name in e?u.push(i(t,r,e)):r.push in e&&e[r.push].forEach(function(e){u.push(i(t,r,e))})})})}),u.join("\r\n")+"\r\n"}},{"./grammar":10}]},{},[1])(1)});